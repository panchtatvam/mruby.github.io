I"¥'<h1 id="mruby-211">mruby 2.1.1</h1>

<p>We are announcing the stable release of mruby 2.1 series - <a href="https://github.com/mruby/mruby/releases/tag/2.1.1">mruby 2.1.1</a>.</p>

<hr />

<h1 id="new-features">New Features</h1>

<h2 id="core-language-features">Core Language Features</h2>

<h3 id="ruby-27-features">Ruby 2.7 features</h3>

<ul>
  <li>Numbered parameters as default block parameters are introduced. (<a href="https://github.com/mruby/mruby/commit/72d57ad094b8e1c529e2e8b41d895fc6f212e31e">72d57ad0</a>)</li>
</ul>

<h2 id="core-libraries">Core Libraries</h2>

<h3 id="ruby-27-features-1">Ruby 2.7 features</h3>

<ul>
  <li>Revert Implement Ruby2.7â€™s frozen strings from <code class="highlighter-rouge">Symbol#to_s</code>. (<a href="https://github.com/mruby/mruby/commit/4296c77e29b67e72399dde8295dd6fa4a10cc321">a367373f</a>)</li>
</ul>

<hr />

<h1 id="update-features">Update Features</h1>

<h2 id="core-language-features-1">Core Language Features</h2>

<ul>
  <li>Always enable the rational and complex literals. (<a href="https://github.com/mruby/mruby/commit/351c9c80e786b6a3f3779cdf2d89879a58f35407">351c9c80</a>)</li>
</ul>

<h2 id="core-libraries-1">Core Libraries</h2>

<ul>
  <li>The <code class="highlighter-rouge">#prepend_features</code> and <code class="highlighter-rouge">#module_function</code> methods are not haves for class objects. (<a href="https://github.com/mruby/mruby/commit/cc52fa66e8c12be2b6bbe3c7fd850ea0b2beb0c1">cc52fa66</a>)</li>
  <li>Remove location info from <code class="highlighter-rouge">Exception#inspect</code>. (<a href="https://github.com/mruby/mruby/commit/d2f2f9db511afc348a88f864b9f0b0ccfc59a8f1">d2f2f9db</a>)</li>
  <li>Allow <code class="highlighter-rouge">true</code>/<code class="highlighter-rouge">false</code> argument to <code class="highlighter-rouge">Kernel#exit</code>. (mrbgems/mruby-exit) (<a href="https://github.com/mruby/mruby/commit/d81e4d71c17f9d65ea87f0e66a4338411863f7bf">d81e4d71</a>)</li>
  <li>Improved the judgment of absolute path on Windows. <a href="https://github.com/mruby/mruby/pull/4950">#4950</a></li>
</ul>

<h2 id="tools">Tools</h2>

<ul>
  <li>Support short options concatenation to <code class="highlighter-rouge">mruby</code> command. (<a href="https://github.com/mruby/mruby/commit/9de7130a9a77482b27a101211ff0f4a63d57a613">9de7130a</a>)</li>
  <li>Support <code class="highlighter-rouge">--</code> (end of options) to <code class="highlighter-rouge">mruby</code> command. (<a href="https://github.com/mruby/mruby/commit/f4b528e07a069b9acbbcb61cced2b04115e61db7">f4b528e0</a>)</li>
  <li>Quit <code class="highlighter-rouge">mruby -v</code> immediately if no program is given for Ruby compatibility. (<a href="https://github.com/mruby/mruby/commit/49653b81ea978a5f02c4a6ce1ed53eb1cd0dbe7a">49653b81</a>)</li>
</ul>

<h2 id="for-mruby-developer">for mruby Developer</h2>

<ul>
  <li>Add assertion to <code class="highlighter-rouge">RVALUE</code> size. (<a href="https://github.com/mruby/mruby/commit/6cf99d12ac17e50b91e6aeb0dd79c611e579fd1b">6cf99d12</a>)</li>
</ul>

<hr />

<h1 id="compatibility">Compatibility</h1>

<h2 id="core-libraries-2">Core Libraries</h2>

<ul>
  <li>Add <code class="highlighter-rouge">File#size</code> and <code class="highlighter-rouge">File#truncate</code>. (mrbgems/mruby-io) (<a href="https://github.com/mruby/mruby/commit/6d9ac89f925e83bd7ca25e04190f264bea600831">6d9ac89f</a>)</li>
  <li>Add <code class="highlighter-rouge">IO#pread</code> and <code class="highlighter-rouge">IO#pwrite</code>. (mrbgems/mruby-io) (<a href="https://github.com/mruby/mruby/commit/4c6d524c473ebb9174d0183dc1d1ac0530337314">4c6d524c</a>)</li>
  <li>Support bit flags for <code class="highlighter-rouge">IO.open</code>. (mrbgems/mruby-io) (<a href="https://github.com/mruby/mruby/commit/69619aeeb1434c30565ff1229897cf5b1af462da">69619aee</a>)</li>
</ul>

<hr />

<h1 id="changes">Changes</h1>

<h2 id="build-system">Build system</h2>

<ul>
  <li>Abandon <code class="highlighter-rouge">minirake</code>. Use <code class="highlighter-rouge">rake</code> for compilation.<br />
Currently, <code class="highlighter-rouge">minirake</code> is left for compatibility, but it will be removed in the future. (<a href="https://github.com/mruby/mruby/commit/de17f63b4567cad3b02f1f1f9386eaf8dd704bbe">de17f63</a>)</li>
</ul>

<hr />

<h1 id="breaking-changes">Breaking Changes</h1>

<ul>
  <li>Remove <code class="highlighter-rouge">MRB_INT16</code> configuration option. (<a href="https://github.com/mruby/mruby/commit/ff57c0278fe7c2b83231fa40e0284e6685a29ee7">ff57c027</a>)</li>
</ul>

<hr />

<h1 id="major-bug-fixes">Major bug fixes</h1>

<ul>
  <li>Parser rejects heredoc without following comma or closing bracket in array/hash literal. <a href="https://github.com/mruby/mruby/issues/4796">#4796</a></li>
  <li>Segfault due to invalid read in <code class="highlighter-rouge">str_init_shared</code>. <a href="https://github.com/mruby/mruby/issues/4807">#4807</a></li>
  <li>Invalid read in array_copy and <code class="highlighter-rouge">mrb_ary_unshift_m</code>. <a href="https://github.com/mruby/mruby/issues/4808">#4808</a></li>
  <li>Parser segfault (invalid read) in <code class="highlighter-rouge">local_add_f</code>. <a href="https://github.com/mruby/mruby/issues/4810">#4810</a></li>
  <li>Parser rejects some heredoc in hash literal. <a href="https://github.com/mruby/mruby/issues/4815">#4815</a></li>
  <li>Rakefile in mruby build emits warnings with Windows paths. <a href="https://github.com/mruby/mruby/issues/4817">#4817</a></li>
  <li>Coredump when use <code class="highlighter-rouge">ensure</code> in <code class="highlighter-rouge">Kernel#eval</code> script. <a href="https://github.com/mruby/mruby/issues/4833">#4833</a></li>
  <li>Fix keyword arguments not be obtained with <code class="highlighter-rouge">mrb_get_args()</code>. <a href="https://github.com/mruby/mruby/issues/4855">#4855</a></li>
  <li>Undefined method `Pathnameâ€™ for MRuby::Toolchain::Android. <a href="https://github.com/mruby/mruby/issues/4895">#4895</a></li>
  <li>Cygwin compile error. <a href="https://github.com/mruby/mruby/issues/4904">#4904</a></li>
  <li><code class="highlighter-rouge">String#to_f</code> should not allow hexdecimal format. <a href="https://github.com/mruby/mruby/issues/4924">#4924</a></li>
  <li>Heap use after free in hash_values_at in mrbgems/mruby-hash-ext/src/hash-ext.c:33. <a href="https://github.com/mruby/mruby/issues/4926">#4926</a></li>
  <li>The method name becomes <code class="highlighter-rouge">call</code> in backtrace inside a block outside a method. <a href="https://github.com/mruby/mruby/issues/4936">#4936</a></li>
  <li>Segmentation fault at mrbgems/mruby-metaprog/src/metaprog.c:142. <a href="https://github.com/mruby/mruby/issues/4955">#4955</a></li>
  <li>Test <code class="highlighter-rouge">mruby-io</code> in tmpdir when AF_UNIX cannot be created on cwd. <a href="https://github.com/mruby/mruby/issues/4981">#4981</a></li>
  <li>IO#readlines/IO#getc hangs while reading over TCPSocket <a href="https://github.com/mruby/mruby/issues/4982">#4982</a></li>
  <li><code class="highlighter-rouge">p-&gt;locals</code> may be <code class="highlighter-rouge">NULL</code> when error occurs before the point. <a href="https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=19886">oss-fuzz: Issue 19886</a></li>
  <li>Fix buffer overflow in <code class="highlighter-rouge">mrb_str_len_to_dbl</code>. <a href="https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=19902">oss-fuzz: Issue 19902</a></li>
  <li>Fix file/directory name parameter for <code class="highlighter-rouge">git</code> command.</li>
  <li>Fix <code class="highlighter-rouge">MRB_FIXNUM_SHIFT</code> with <code class="highlighter-rouge">MRB_WORD_BOXING</code>, <code class="highlighter-rouge">MRB_INT32</code> and <code class="highlighter-rouge">MRB_64BIT</code>.</li>
  <li>Build when directories and files have spaces.</li>
  <li>Fix argument specs of below methods.
    <ul>
      <li><code class="highlighter-rouge">Exception</code><br />
<code class="highlighter-rouge">Exception#exception</code>.</li>
      <li><code class="highlighter-rouge">IO</code> (mrbgems/mruby-io)<br />
<code class="highlighter-rouge">IO._popen</code>, <code class="highlighter-rouge">IO.for_fd</code>, <code class="highlighter-rouge">IO.select</code>, <code class="highlighter-rouge">IO.sysopen</code>, <code class="highlighter-rouge">IO.new</code>, <code class="highlighter-rouge">IO#sysread</code> and <code class="highlighter-rouge">IO#sysseek</code>.</li>
      <li><code class="highlighter-rouge">File</code> (mrbgems/mruby-io)<br />
<code class="highlighter-rouge">File.umask</code>.</li>
      <li><code class="highlighter-rouge">Integer</code><br />
<code class="highlighter-rouge">Integer#ceil</code>, <code class="highlighter-rouge">Integer#floor</code>, <code class="highlighter-rouge">Integer#round</code> and <code class="highlighter-rouge">Integer#truncate</code>.</li>
      <li><code class="highlighter-rouge">Kernel</code><br />
<code class="highlighter-rouge">BasicObject#instance_eval</code>, <code class="highlighter-rouge">Kernel#integer</code>, <code class="highlighter-rouge">Kernel#define_singleton_method</code>, <code class="highlighter-rouge">Kernel#send</code>, <code class="highlighter-rouge">Kernel#proc</code>, <code class="highlighter-rouge">Kernel#sprintf</code>, <code class="highlighter-rouge">Kernel#format</code> and <code class="highlighter-rouge">Kernel#respond_to?</code>.</li>
      <li><code class="highlighter-rouge">Hash</code><br />
<code class="highlighter-rouge">Hash.new</code> and <code class="highlighter-rouge">Hash#default</code>.</li>
      <li><code class="highlighter-rouge">Fiber</code> (mrbgems/mruby-fiber)<br />
<code class="highlighter-rouge">Fiber.new</code>.</li>
    </ul>
  </li>
</ul>

<hr />

<p>We have done 321 commits to 134 files, 4,084 lines were added, 2,742 lines removed since mruby 2.1.0. For more detail of the updates, <a href="https://github.com/mruby/mruby/compare/2.1.0...2.1.1">see Commit Log</a>.</p>

<p>Stay Home and enjoy <code class="highlighter-rouge">mruby 2.1.1</code>.</p>
:ET